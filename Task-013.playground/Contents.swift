import UIKit

/*
 ÐœÐµÑ‚Ð¾Ð´Ñ‹
 Ð¡Ð´ÐµÐ»Ð°ÐµÐ¼ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÑƒÑŽ Ð¸Ð³Ñ€Ñƒ
 1. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚Ð¸Ð¿ ÐšÐ¾Ð¼Ð½Ð°Ñ‚Ð°. Ð£ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹ ÐµÑÑ‚ÑŒ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹ W Ð½Ð° H. Ð˜ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚Ð¸Ð¿ ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð¶. Ð£ Ð½ÐµÐ³Ð¾ ÐµÑÑ‚ÑŒ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð° Ð² ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ðµ X Ð¸ Y. Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÐºÑ€Ð°ÑÐ¸Ð²ÐµÐ½ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð° Ð² ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ðµ
 2. ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ñƒ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÑ‚Ð¾Ð´ Ð¸Ð´Ñ‚Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ ÑÐ½ÑƒÐ¼Ñ‡Ð¸Ðº Ð»ÐµÐ²Ð¾, Ð¿Ñ€Ð°Ð²Ð¾, Ð²ÐµÑ€Ñ…, Ð²Ð½Ð¸Ð·
 Ð­Ñ‚Ð¾Ñ‚ Ð¼ÐµÑ‚Ð¾Ð´ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿ÐµÑ€ÐµÐ´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð°. Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾ Ñ‡Ñ‚Ð¾ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ¸Ð½ÑƒÑ‚ÑŒ Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‹ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹. ÐŸÐ¾Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð° Ð¸ Ð¿Ð¾ÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÑÑ‚Ð¾ Ð³Ñ€Ð°Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸
 3. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚Ð¸Ð¿ Ð¯Ñ‰Ð¸Ðº. Ð£ ÑÑ‰Ð¸ÐºÐ° Ñ‚Ð°ÐºÐ¶Ðµ ÐµÑÑ‚ÑŒ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð° Ð² ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ðµ X Ð¸ Y. Ð¯Ñ‰Ð¸Ðº Ñ‚Ð°ÐºÐ¶Ðµ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾ÐºÐ¸Ð´Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‹ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹ Ð¸ ÑÑ‰Ð¸Ðº Ñ‚Ð°ÐºÐ¶Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ñ€Ð°ÑÐ¿ÐµÑ‡Ð°Ñ‚Ð°Ð½ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶ÐµÐ¼ Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¿ÐµÑ‡Ð°Ñ‚Ð¸.
 4. Ð¢ÐµÐ¿ÐµÑ€ÑŒ ÑÐ°Ð¼Ð¾Ðµ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ðµ, Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶ Ð¼Ð¾Ð¶ÐµÑ‚ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ ÑÑ‰Ð¸Ðº, ÐµÑÐ»Ð¸ Ð¾Ð½ ÑÑ‚Ð¾Ð¸Ñ‚ Ð½Ð° Ñ‚Ð¾Ð¼ Ð¼ÐµÑÑ‚Ðµ, ÐºÑƒÐ´Ð° Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð¿Ð¾Ð¿Ð°ÑÑ‚ÑŒ. Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ñ‡Ñ‚Ð¾ Ð½Ð¸ Ð¾Ð´Ð¸Ð½ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾ÐºÐ¸Ð½ÑƒÑ‚ÑŒ Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‹ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹. ÐŸÐ¾Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ ÑÑ‰Ð¸Ðº :)
 5. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ñ‡ÐºÑƒ Ð² ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ðµ, ÐºÑƒÐ´Ð° Ð½Ð°Ð´Ð¾ ÑÑ‰Ð¸Ðº Ð¿ÐµÑ€ÐµÐ´Ð²Ð¸Ð½ÑƒÑ‚ÑŒ Ð¸ Ð´Ð²Ð¸Ð³Ð°Ð¹Ñ‚Ðµ :)
 6. ÐœÐ¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð² ÑÑ‰Ð¸ÐºÐ¾Ð² Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
 */

// ÐšÐ¾Ð¼Ð½Ð°Ñ‚Ð°
struct Room {
    let height: Int // Y (row)
    let width: Int // X (column)
    
    func render(character: Character, box: Box, target: Target) {
        for row in 1...height {
            var line = ""
            
            for column in 1...width {
                if row == character.y && column == character.x {
                    line += "ðŸ˜Ž"
                } else if row == box.y && column == box.x {
                    line += "ðŸ“¦"
                } else if row == target.y && column == target.x {
                    line += "ðŸŽ¯"
                } else {
                    line += "â¬œï¸"
                }
            }
            print(line)
        }
        print("---------------")
    }
}

// ÐÐ°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
enum Direction {
    case left
    case right
    case up
    case down
}

// Ð¯Ñ‰Ð¸Ðº
struct Box {
    var x: Int
    var y: Int
}

// Ð¢Ð¾Ñ‡ÐºÐ°, ÐºÑƒÐ´Ð° Ð½ÑƒÐ¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð²Ð¸Ð½ÑƒÑ‚ÑŒ ÑÑ‰Ð¸Ðº
struct Target {
    let x: Int
    let y: Int
}

// ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð¶
struct Character {
    var x: Int
    var y: Int
    
    mutating func move(_ direction: Direction, in room: Room, box: inout Box) {
        var targetX = x
        var targetY = y

        switch direction {
        case .left: targetX -= 1
        case .right: targetX += 1
        case .up: targetY -= 1
        case .down: targetY += 1
        }
        
        // Ð’ Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹?
        guard targetX >= 1 && targetX <= room.width &&
              targetY >= 1 && targetY <= room.height else {
            return
        }
        // Ð¡Ñ‚Ð¾Ð¸Ñ‚ Ð»Ð¸ Ñ‚Ð°Ð¼ ÑÑ‰Ð¸Ðº?
        if targetX == box.x && targetY == box.y {
            // ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼, ÐºÑƒÐ´Ð° ÐµÐ³Ð¾ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ
            var boxTargetX = box.x
            var boxTargetY = box.y
            
            switch direction {
            case .left: boxTargetX -= 1
            case .right: boxTargetX += 1
            case .up: boxTargetY -= 1
            case .down: boxTargetY += 1
            }
            
            // ÐœÐ¾Ð¶ÐµÑ‚ Ð»Ð¸ ÑÑ‰Ð¸Ðº ÑÐ´Ð²Ð¸Ð½ÑƒÑ‚ÑŒÑÑ?
            guard boxTargetX >= 1 && boxTargetX <= room.width &&
                  boxTargetY >= 1 && boxTargetY <= room.height else {
                return
            }
            
            // Ð”Ð²Ð¸Ð³Ð°ÐµÐ¼ ÑÑ‰Ð¸Ðº
            box.x = boxTargetX
            box.y = boxTargetY
        }
        
        // Ð”Ð²Ð¸Ð³Ð°ÐµÐ¼ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð°
        x = targetX
        y = targetY
    }
}

let room = Room(height: 7, width: 7)
var character = Character(x: 6, y: 6)
var box = Box(x: 6, y: 5)
var target = Target(x: 4, y: 4)

room.render(character: character, box: box, target: target)

character.move(.up, in: room, box: &box)
room.render(character: character, box: box, target: target)

character.move(.right, in: room, box: &box)
room.render(character: character, box: box, target: target)

character.move(.up, in: room, box: &box)
room.render(character: character, box: box, target: target)

character.move(.left, in: room, box: &box)
room.render(character: character, box: box, target: target)

character.move(.left, in: room, box: &box)
room.render(character: character, box: box, target: target)
